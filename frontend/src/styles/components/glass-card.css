/**
 * Glass Card - macOS Glassmorphism
 *
 * Design features:
 * - Semi-transparent background + backdrop-filter blur
 * - Gradient border (lighter top/left, darker bottom/right)
 * - Multi-layer soft shadows (macOS window style)
 * - Hover state with lift effect
 * - Smooth transitions
 */

@layer components {
    /* Base glass card - Frosted Glass with Diffusion Shadow */
    .glass-card {
        /* Enhanced Glassmorphism (Frosted Glass) */
        background: oklch(from var(--card) l c h / 0.5);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);

        /* No border or extremely subtle border */
        border: 1px solid oklch(1 0 0 / 0.03);
        border-radius: var(--radius-lg);

        /* Diffusion Shadow (Cloud-like) - 3 layers */
        box-shadow:
            0 8px 32px oklch(0 0 0 / 0.08),
            0 16px 64px oklch(0 0 0 / 0.12),
            0 24px 96px oklch(0 0 0 / 0.15);

        /* Layout */
        padding: 1.5rem;

        /* Smooth animation (400ms for cloud-like feel) */
        transition: all 400ms ease-out;
    }

    .glass-card:hover {
        /* Cloud floating effect */
        transform: translateY(-8px);

        /* Enhanced diffusion shadow on hover */
        box-shadow:
            0 12px 40px oklch(0 0 0 / 0.1),
            0 24px 80px oklch(0 0 0 / 0.15),
            0 36px 120px oklch(0 0 0 / 0.2);

        /* Slightly brighter background */
        background: oklch(from var(--card) calc(l + 0.02) c h / 0.6);
    }

    /* Interactive variant (clickable) */
    .glass-card--interactive {
        cursor: pointer;
    }

    .glass-card--interactive:active {
        transform: translateY(0);
        box-shadow:
            0 1px 2px oklch(0 0 0 / 0.05),
            0 2px 4px oklch(0 0 0 / 0.08),
            inset 0 1px 0 oklch(1 0 0 / 0.1);
    }

    /* Compact variant */
    .glass-card--compact {
        padding: 1rem;
    }

    /* Spacious variant */
    .glass-card--spacious {
        padding: 2rem;
    }

    /* Highlight variant (with border glow) */
    .glass-card--highlight {
        border-color: oklch(from var(--primary) l c h / 0.3);
        box-shadow:
            0 2px 4px oklch(0 0 0 / 0.05),
            0 4px 8px oklch(0 0 0 / 0.08),
            0 8px 16px oklch(0 0 0 / 0.1),
            0 0 0 1px oklch(from var(--primary) l c h / 0.2),
            inset 0 1px 0 oklch(1 0 0 / 0.1);
    }

    .glass-card--highlight:hover {
        box-shadow:
            0 4px 8px oklch(0 0 0 / 0.08),
            0 8px 16px oklch(0 0 0 / 0.12),
            0 16px 32px oklch(0 0 0 / 0.15),
            0 0 0 2px oklch(from var(--primary) l c h / 0.3),
            inset 0 1px 0 oklch(1 0 0 / 0.15);
    }

    /* Message card variant (for chat bubbles) */
    .glass-card--message {
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        max-width: 70%;
    }

    .glass-card--message-own {
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        max-width: 70%;
        background: oklch(from var(--primary) l c h / 0.15);
        border-color: oklch(from var(--primary) l c h / 0.3);
        margin-left: auto;
    }

    .glass-card--message-other {
        padding: 0.75rem 1rem;
        border-radius: 1rem;
        max-width: 70%;
        background: oklch(from var(--card) l c h / 0.6);
        margin-right: auto;
    }

    /* Modal/Dialog variant (higher elevation) */
    .glass-card--modal {
        box-shadow:
            0 8px 16px oklch(0 0 0 / 0.1),
            0 16px 32px oklch(0 0 0 / 0.15),
            0 32px 64px oklch(0 0 0 / 0.2),
            inset 0 1px 0 oklch(1 0 0 / 0.15);
    }
}

/* Safari support check */
@supports not (backdrop-filter: blur(20px)) {
    .glass-card {
        background: var(--card);
        border-color: var(--border);
    }

    .glass-card--message-own {
        background: var(--primary);
        color: var(--primary-foreground);
    }
}
